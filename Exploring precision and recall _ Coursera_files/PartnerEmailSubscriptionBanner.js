define("bundles/account-settings/components/PartnerEmailSubscriptionBanner",["require","exports","module","react-with-addons","i18n!nls/account-settings","js/lib/coursera.react-intl","bundles/account-settings/constants/SettingsConstants","bundles/account-settings/actions/SettingsActionCreators","bundles/account-settings/stores/SettingsStore","bundles/teach-course/components/ToggleSwitch","css!./__styles__/PartnerEmailSubscriptionBanner"],function(require,exports,module){"use strict";function _defaults(t,s){for(var o=Object.getOwnPropertyNames(s),e=0;e<o.length;e++){var n=o[e],r=Object.getOwnPropertyDescriptor(s,n);r&&r.configurable&&void 0===t[n]&&Object.defineProperty(t,n,r)}return t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):_defaults(e,t))}var o=function(){function defineProperties(r,n){for(var e=0;e<n.length;e++){var t=n[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}return function(t,e,n){return e&&defineProperties(t.prototype,e),n&&defineProperties(t,n),t}}(),l=function get(o,c,u){var n=!0;t:for(;n;){var e=o,a=c,i=u;n=!1,null===e&&(e=Function.prototype);var t=Object.getOwnPropertyDescriptor(e,a);if(void 0===t){var r=Object.getPrototypeOf(e);if(null===r)return void 0;o=r,c=a,u=i,n=!0,t=r=void 0;continue t}if("value"in t)return t.value;var s=t.get;if(void 0===s)return void 0;return s.call(i)}},t=require("react-with-addons"),a=require("i18n!nls/account-settings"),c=require("js/lib/coursera.react-intl"),i=c.FormattedHTMLMessage,u=require("bundles/account-settings/constants/SettingsConstants"),n=u.PartnerBannerStatus,r=require("bundles/account-settings/actions/SettingsActionCreators"),s=require("bundles/account-settings/stores/SettingsStore"),e=require("bundles/teach-course/components/ToggleSwitch");require("css!./__styles__/PartnerEmailSubscriptionBanner");var p=function(c){function PartnerEmailSubscriptionBanner(n,s){var t=this;_classCallCheck(this,PartnerEmailSubscriptionBanner),l(Object.getPrototypeOf(PartnerEmailSubscriptionBanner.prototype),"constructor",this).call(this,n,s),this.handleDismiss=function(){r.dismissPartnerEmailSubscription(t.props.courseId,t.props.partnerId)},this.onChange=function(){t.setState(PartnerEmailSubscriptionBanner.getStateFromStores(t.props.partnerId))},this.toggleSubscription=function(n){var s=n===e.getStatus().On;r.togglePartnerEmailSubscription(t.props.partnerId,t.props.courseId,s)},this.state=PartnerEmailSubscriptionBanner.getStateFromStores(n.partnerId)}return _inherits(PartnerEmailSubscriptionBanner,c),o(PartnerEmailSubscriptionBanner,null,[{key:"propTypes",value:{courseId:t.PropTypes.string.isRequired,partnerId:t.PropTypes.string.isRequired,partnerName:t.PropTypes.string.isRequired},enumerable:!0},{key:"getStateFromStores",value:function value(t){return{partnerBannerStatus:s.getPartnerBannerStatus(t)}},enumerable:!0}]),o(PartnerEmailSubscriptionBanner,[{key:"componentWillMount",value:function componentWillMount(){r.getPartnerBannerViewStatus(this.props.courseId,this.props.partnerId),s.addListener("change",this.onChange)}},{key:"componentWillUnmount",value:function componentWillUnmount(){s.removeListener("change",this.onChange)}},{key:"renderSubscriptionText",value:function renderSubscriptionText(){return this.state.partnerBannerStatus===n.SUBSCRIBED?t.createElement(i,{message:a("<strong>Yes</strong>, I’d like to receive email about\n                      other programs from <strong>{partnerName}</strong>."),partnerName:this.props.partnerName}):t.createElement(i,{message:a("<strong>No</strong>, I don’t want to receive email\n                      about other programs from <strong>{partnerName}</strong>."),partnerName:this.props.partnerName})}},{key:"render",value:function render(){if(!this.state.partnerBannerStatus||this.state.partnerBannerStatus===n.DISMISSED)return null;var r=e.getStatus().Off;return this.state.partnerBannerStatus===n.SUBSCRIBED&&(r=e.getStatus().On),t.createElement("div",{className:"rc-PartnerEmailSubscriptionBanner"},t.createElement("div",{className:"partner-banner-content horizontal-box align-items-vertical-center"},t.createElement("p",{className:"partner-subscription-text flex-1"},this.renderSubscriptionText()),t.createElement(e,{onToggle:this.toggleSubscription,defaultStatus:r}),t.createElement("i",{className:"cif-close dismiss",onClick:this.handleDismiss})))}}]),PartnerEmailSubscriptionBanner}(t.Component);module.exports=p});