define("bundles/ondemand/components/endOfCourse/components/LaggingMessage",["require","exports","module","react-router","react-with-addons","i18n!nls/ondemand","bundles/ondemand/components/CourseInfoPage","bundles/ondemand/stores/SessionStore","bundles/ondemand/utils/onDemandSessionsApi","bundles/ondemand/components/sessions/SessionSwitchModal","pages/open-course/common/constants","css!./__styles__/LaggingMessage.css"],function(require,exports,module){"use strict";function _defaults(e,s){for(var i=Object.getOwnPropertyNames(s),n=0;n<i.length;n++){var t=i[n],o=Object.getOwnPropertyDescriptor(s,t);o&&o.configurable&&void 0===e[t]&&Object.defineProperty(e,t,o)}return e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _inherits(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):_defaults(n,e))}var o=function(){function defineProperties(o,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}return function(e,n,t){return n&&defineProperties(e.prototype,n),t&&defineProperties(e,t),e}}(),s=function get(i,c,l){var t=!0;e:for(;t;){var n=i,r=c,a=l;t=!1,null===n&&(n=Function.prototype);var e=Object.getOwnPropertyDescriptor(n,r);if(void 0===e){var o=Object.getPrototypeOf(n);if(null===o)return void 0;i=o,c=r,l=a,t=!0,e=o=void 0;continue e}if("value"in e)return e.value;var s=e.get;if(void 0===s)return void 0;return s.call(a)}},i=require("react-router"),d=i.Link,e=require("react-with-addons"),t=require("i18n!nls/ondemand"),u=require("bundles/ondemand/components/CourseInfoPage").getUrl,n=require("bundles/ondemand/stores/SessionStore"),c=require("bundles/ondemand/utils/onDemandSessionsApi"),a=require("bundles/ondemand/components/sessions/SessionSwitchModal"),r=require("pages/open-course/common/constants");require("css!./__styles__/LaggingMessage.css");var l=function(i){function LaggingMessage(n,t){var e=this;_classCallCheck(this,LaggingMessage),s(Object.getPrototypeOf(LaggingMessage.prototype),"constructor",this).call(this,n,t),this.onChange=function(){e.setState(e.getStateFromStores())},this.showSessionSwitchModal=function(){e.setState({showSessionSwitchModal:!0})},this.hideSessionSwitchModal=function(){e.setState({showSessionSwitchModal:!1})},this.state=this.getStateFromStores()}return _inherits(LaggingMessage,i),o(LaggingMessage,[{key:"getStateFromStores",value:function getStateFromStores(){return{enrollableSession:n.getEnrollableSession()}}}]),o(LaggingMessage,[{key:"componentWillMount",value:function componentWillMount(){n.listen(this.onChange)}},{key:"componentDidMount",value:function componentDidMount(){this.state.enrollableSession||c.getFollowingSession(n.getSessionId()).done()}},{key:"componentWillUnmount",value:function componentWillUnmount(){n.unlisten(this.onChange)}},{key:"render",value:function render(){if(!this.state.enrollableSession||!this.state.enrollableSession.hasStarted())return null;return e.createElement("div",{className:"rc-LaggingMessage card-rich-interaction styleguide"},e.createElement("div",{className:"contents"},e.createElement("h3",{className:"headline-3-text"},t("Get back on track with a new session")),e.createElement("p",{className:"body-1-text"},t("Looks like you've missed a few deadlines in this session. That’s okay -\n              if you switch to the next session, your progress will transfer with you, and you’ll be\n              back on track with new deadlines and a community of peers on the same schedule.")),e.createElement("button",{className:"upcoming-session-button primary",onClick:this.showSessionSwitchModal},t("Join new session"))),this.state.showSessionSwitchModal&&e.createElement(a,{onClose:this.hideSessionSwitchModal,courseId:r.courseId}))}}]),LaggingMessage}(e.Component);module.exports=l});